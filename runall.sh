#!/bin/bash

RED='\033[0;31m'
YELLOW='\033[0;33m'
NC='\033[0m' # No Color


echo -e "${YELLOW}***********************************************************************************************************************"
echo -e "*                                                                                                                     *"
echo -e "*  ${RED}STARTING ALL THE THINGS ${YELLOW}                                                                                *"
echo -e "*                                                                                                                     *"
echo -e "*  ${RED}PULLING LATEST IMAGES  ${YELLOW}                                                                                 *"
echo -e "*                                                                                                                     *"
echo -e "***********************************************************************************************************************${NC}"

docker pull traefik:latest
docker pull portainer/portainer-ce
docker pull jenkins/jenkins:latest
docker pull sonatype/nexus3

echo ' '
echo -e "***********************************************************************************************************************"
echo -e "*                                                                                                                     *"
echo -e "*   ${RED}STARTING PORTAINER    ${NC}                                                                                 *"
echo -e "*                                                                                                                     *"
echo -e "***********************************************************************************************************************"
cd Swarm
cd portainer
pwd
sh start.sh

echo ' '
echo -e "***********************************************************************************************************************"
echo -e "*                                                                                                                     *"
echo -e "*   ${RED}STARTING TRAEFIK     ${NC}                                                                                  *"
echo -e "*                                                                                                                     *"
echo -e "***********************************************************************************************************************"
cd ..
cd traefik
pwd
sh setup.sh

echo ' '
echo -e "***********************************************************************************************************************"
echo -e "*                                                                                                                     *"
echo -e "*   ${RED}STARTING JENKINS AND THE BUILD AGENTS     ${NC}                                                             *"
echo -e "*                                                                                                                     *"
echo -e "***********************************************************************************************************************"
cd ..
cd Builder
pwd
sh start.sh

cd ..
pwd 

echo ' '
echo -e "***********************************************************************************************************************"
echo -e "*                                                                                                                     *"
echo -e "*   ${RED}EXAMINE DOCKER ENVIRONMENT      ${NC}                                                                       *"
echo -e "*                                                                                                                     *"
echo -e "***********************************************************************************************************************"
docker node ls
sleep 10s
docker service ls